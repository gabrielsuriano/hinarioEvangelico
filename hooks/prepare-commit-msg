#!/bin/sh

# Hook: prepare-commit-msg
# Executado AP√ìS a mensagem do commit ser criada
# Atualiza a vers√£o automaticamente baseado em tags no commit

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2

# S√≥ executar para commits normais (n√£o merges, squashes, etc)
if [ -z "$COMMIT_SOURCE" ] || [ "$COMMIT_SOURCE" = "message" ]; then
  echo "üîÑ Verificando versionamento autom√°tico..."
  node scripts/auto-version.js "$COMMIT_MSG_FILE"
  
  if [ $? -ne 0 ]; then
    echo "‚ùå Erro no versionamento autom√°tico"
    exit 1
  fi
fi

exit 0
